import type { Order } from "@/types";
import { set, addDays, subDays } from "date-fns";
import { mockProducts } from "./mockData"; // Import mockProducts to get batch IDs

const today = new Date();

// Helper to get a batch ID for a product
const getBatchIdForProduct = (productId: string): string => {
  const product = mockProducts.find(p => p.id === productId);
  return product && product.batches.length > 0 ? product.batches[0].id : "unknown-batch";
};

export const mockOrders: Order[] = [
  // Today's Orders
  {
    id: "order-1",
    productId: "1",
    productName: "Apples",
    productImageUrl: "/images/apple.jpg",
    quantity: "2kg",
    priceAtPurchase: 11.98,
    clientName: "Karl Hoffmann",
    status: "Ready for Pickup",
    pickupWindowStart: set(today, { hours: 14, minutes: 0, seconds: 0 }).toISOString(),
    pickupWindowEnd: set(today, { hours: 16, minutes: 0, seconds: 0 }).toISOString(),
    batchId: getBatchIdForProduct("1"),
  },
  {
    id: "order-2",
    productId: "12",
    productName: "Sourdough Bread",
    productImageUrl: "/images/br.jpg",
    quantity: "1 loaf",
    priceAtPurchase: 8.00,
    clientName: "Wilhelm Bauser",
    status: "Pending",
    pickupWindowStart: set(today, { hours: 16, minutes: 30, seconds: 0 }).toISOString(),
    pickupWindowEnd: set(today, { hours: 17, minutes: 0, seconds: 0 }).toISOString(),
    batchId: getBatchIdForProduct("12"),
  },
  {
    id: "order-3",
    productId: "4",
    productName: "Eggs",
    productImageUrl: "/images/eggs.jpg",
    quantity: "1 dozen",
    priceAtPurchase: 4.50,
    clientName: "Sophie Schneider",
    status: "Completed",
    pickupWindowStart: set(today, { hours: 9, minutes: 0, seconds: 0 }).toISOString(),
    pickupWindowEnd: set(today, { hours: 10, minutes: 0, seconds: 0 }).toISOString(),
    batchId: getBatchIdForProduct("4"),
  },
  // Yesterday's order
  {
    id: "order-5",
    productId: "19",
    productName: "Raw Cow's Milk",
    productImageUrl: "/images/mi.jpg",
    quantity: "1l",
    priceAtPurchase: 9.00,
    clientName: "Ethan Hunt",
    status: "Completed",
    pickupWindowStart: set(subDays(today, 1), { hours: 11, minutes: 0, seconds: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 1), { hours: 12, minutes: 0, seconds: 0 }).toISOString(),
    batchId: getBatchIdForProduct("19"),
  },
  // Tomorrow's order
  {
    id: "order-6",
    productId: "13",
    productName: "Carrots",
    productImageUrl: "https://images.unsplash.com/photo-1590868309235-ea34bed7bd7f?q=80&w=2500&auto=format&fit=crop",
    quantity: "1kg",
    priceAtPurchase: 3.50,
    clientName: "Fiona Glenanne",
    status: "Pending",
    pickupWindowStart: set(addDays(today, 1), { hours: 10, minutes: 0, seconds: 0 }).toISOString(),
    pickupWindowEnd: set(addDays(today, 1), { hours: 11, minutes: 0, seconds: 0 }).toISOString(),
    batchId: getBatchIdForProduct("13"),
  },
  // Historical Orders for Statistics
  {
    id: "order-hist-1",
    productId: "10",
    productName: "Chicken Thighs",
    productImageUrl: "/images/c.jpg",
    quantity: "500g",
    priceAtPurchase: 12.00,
    clientName: "Anna Schmidt",
    status: "Completed",
    pickupWindowStart: set(subDays(today, 5), { hours: 15, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 5), { hours: 16, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("10"),
  },
  {
    id: "order-hist-2",
    productId: "1",
    productName: "Apples",
    productImageUrl: "/images/apple.jpg",
    quantity: "1kg",
    priceAtPurchase: 5.99,
    clientName: "Max Mustermann",
    status: "Completed",
    pickupWindowStart: set(subDays(today, 5), { hours: 17, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 5), { hours: 18, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("1"),
  },
  {
    id: "order-hist-3",
    productId: "29",
    productName: "Smoked Salmon",
    productImageUrl: "/images/sal.jpg",
    quantity: "200g",
    priceAtPurchase: 16.50,
    clientName: "Julia Weber",
    status: "Completed",
    pickupWindowStart: set(subDays(today, 12), { hours: 10, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 12), { hours: 11, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("29"),
  },
  {
    id: "order-hist-4",
    productId: "9",
    productName: "Goat Cheese",
    productImageUrl: "/images/ch.jpg",
    quantity: "200g",
    priceAtPurchase: 8.50,
    clientName: "Tom Bauer",
    status: "Completed",
    pickupWindowStart: set(subDays(today, 25), { hours: 12, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 25), { hours: 13, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("9"),
  },
  {
    id: "order-hist-5",
    productId: "12",
    productName: "Sourdough Bread",
    productImageUrl: "/images/br.jpg",
    quantity: "2 loaves",
    priceAtPurchase: 16.00,
    clientName: "Sophie Schneider", // Repeat customer
    status: "Completed",
    pickupWindowStart: set(subDays(today, 28), { hours: 9, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 28), { hours: 10, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("12"),
  },
  {
    id: "order-hist-6",
    productId: "13",
    productName: "Carrots",
    productImageUrl: "https://images.unsplash.com/photo-1590868309235-ea34bed7bd7f?q=80&w=2500&auto=format&fit=crop",
    quantity: "2kg",
    priceAtPurchase: 7.00,
    clientName: "Sophie Schneider", // Repeat customer
    status: "Completed",
    pickupWindowStart: set(subDays(today, 15), { hours: 14, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 15), { hours: 15, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("13"),
  },
  {
    id: "order-hist-7",
    productId: "1",
    productName: "Apples",
    productImageUrl: "/images/apple.jpg",
    quantity: "3kg",
    priceAtPurchase: 17.97,
    clientName: "Max Mustermann", // Repeat customer
    status: "Completed",
    pickupWindowStart: set(subDays(today, 20), { hours: 11, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 20), { hours: 12, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("1"),
  },
  {
    id: "order-hist-8",
    productId: "1",
    productName: "Apples",
    productImageUrl: "/images/apple.jpg",
    quantity: "1kg",
    priceAtPurchase: 5.99,
    clientName: "Lukas Fischer",
    status: "Completed",
    pickupWindowStart: set(subDays(today, 40), { hours: 10, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 40), { hours: 11, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("1"),
  },
  {
    id: "order-hist-9",
    productId: "12",
    productName: "Sourdough Bread",
    productImageUrl: "/images/br.jpg",
    quantity: "1 loaf",
    priceAtPurchase: 8.00,
    clientName: "Lukas Fischer", // Repeat customer
    status: "Completed",
    pickupWindowStart: set(subDays(today, 35), { hours: 13, minutes: 0 }).toISOString(),
    pickupWindowEnd: set(subDays(today, 35), { hours: 14, minutes: 0 }).toISOString(),
    batchId: getBatchIdForProduct("12"),
  },
];